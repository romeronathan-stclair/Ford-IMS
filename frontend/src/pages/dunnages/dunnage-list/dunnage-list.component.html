<h1 class="page-header">Dunnage</h1>
<div class="table-header">

  <div *ngIf="departments.length > 0" class="dropdown">
      <p-dropdown (onChange)="changeDepartment($event)" placeholder="Sort by Department" optionLabel="departmentName"
          [options]="departments" [(ngModel)]="selectedDepartment"></p-dropdown>
  </div>
  <div class="search-bar">
    <i class="fa-solid fa-magnifying-glass"></i>
    <form [formGroup]="dunnageForm">
        <input placeholder="Search by Name" formControlName="dunnageName" class="form-control" id="name-input"
            required (input)="searchByName()" />
    </form>

</div>
  <img src="/assets/ford-logo.png" />

</div>
<div class="table-holder">
  <div class="card">
    <mat-card *ngFor="let dunnage of dunnages">
      <div class="low-dunnage-label-wrapper" *ngIf="dunnage.currentCount <= dunnage.lowStock">
        <div class="low-dunnage-label">LOW STOCK</div>
      </div>
      <div class="moderate-dunnage-label-wrapper" *ngIf="dunnage.currentCount <= dunnage.moderatStock && dunnage.currentCount > dunnage.lowStock">
        <div class="moderate-dunnage-label">MODERATE STOCK</div>
      </div>
      <div class="high-dunnage-label-wrapper" *ngIf="dunnage.currentCount > dunnage.moderateStock">
        <div class="high-dunnage-label">HIGH STOCK</div>
      </div>
      <img class="dunnage-img" mat-card-image [src]="dunnage.imageURL" alt="{{dunnage.name}}">
        <mat-card-title>{{dunnage.name}}</mat-card-title>
        <mat-card-subtitle>{{dunnage.marketLocation}}</mat-card-subtitle>
      <mat-card-actions>
        <button [routerLink]="'/dashboard/dunnage/edit/info/' + dunnage._id" mat-mini-fab color="primary"><mat-icon>edit</mat-icon></button>
        <button [routerLink]="'/dashboard/dunnage/view-info/' + dunnage._id" mat-mini-fab color="primary"><mat-icon>info</mat-icon></button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
<div class="paginator-holder">
  <button [disabled]="activePlantId == '0'" [routerLink]="'/dashboard/dunnage/create/step-one'" type="submit"
      class="general-button first-button"><i class="fa-solid fa-plus"></i>Create New dunnage</button>
  <mat-paginator (page)="pageChanged($event)" #paginator [pageSize]="pageSize"
      aria-label="Select page of periodic elements" [length]="length">
  </mat-paginator>
  <button type="submit" class="general-button">View Event Log</button>
</div>
<p-confirmDialog #cd [style]="{width: '30vw'}">
  <ng-template pTemplate="header">
      <h3></h3>
  </ng-template>

  <ng-template pTemplate="footer">
      <button class="submit-button" type="button" label="No" (click)="cd.reject()">No</button>
      <button class="submit-button" type="button" label="Yes" (click)="cd.accept()">Yes</button>
  </ng-template>
</p-confirmDialog>
